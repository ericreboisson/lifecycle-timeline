(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const f={en:{filter:"Filter versions...",oss:"OSS Support",ent:"Enterprise Support",eol:"Out of Support",less:"Show Less",more:"Show {n} more versions",notes:"View Release Notes for {v}",dark:"Toggle Dark Mode",ossDesc:"Free security updates and bugfixes.",entDesc:"Expert support during OSS plus extended support after EOL.",eolDesc:"End of life. No further updates are provided.",today:"Today's date: {date}",branch:"Branch",initial:"Initial Release",ossEnd:"End OSS",entEnd:"End Enterprise *",majorOnly:"Major versions only"},fr:{filter:"Filtrer les versions...",oss:"Support OSS",ent:"Support Entreprise",eol:"Fin de support",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *",majorOnly:"Versions majeures uniquement"}};class v{constructor(t,i,s={}){this.root=document.getElementById(t),this.root&&(this.options=s,this.visibleCount=s.visibleCount||3,this.showTable=s.showTable!==!1,this.showThemeToggle=s.showThemeToggle!==!1,this.showLegend=s.showLegend!==!1,this.filterVersions=s.filterVersions!==!1,this.splitSupport=s.splitSupport===!0,this.compactMode=s.compactMode===!0,this.showMajorFilter=s.showMajorFilter===!0,this.isExpanded=!1,this.theme="light",this.filterText="",this.majorFilterEnabled=!1,this.activeHighlight=null,this.root.classList.add("lt-root"),this.root.classList.toggle("lt-mode-split",this.splitSupport),this.root.classList.toggle("lt-mode-overlay",!this.splitSupport),this.root.classList.toggle("lt-mode-compact",this.compactMode),this.root.setAttribute("data-theme",this.theme),this.translations={...f,...s.i18n||{}},this.locale=s.locale||this.detectLanguage(),this.setupBaseLayout(),this.updateData(i))}detectLanguage(){const t=(navigator.language||"en").split("-")[0];return this.translations[t]?t:"en"}t(t,i={}){let s=(this.translations[this.locale]||this.translations.en)[t]||t;return Object.keys(i).forEach(e=>s=s.replace(`{${e}}`,i[e])),s}setupBaseLayout(){this.root.innerHTML="",this.root.setAttribute("role","application"),this.root.setAttribute("aria-label","Product Lifecycle Timeline"),this.renderToolbar(),this.showThemeToggle&&this.renderThemeToggle(),this.showTable&&(this.tableContainer=this.el("div","lt-table-container",this.root)),this.wrapper=this.el("div","lt-wrapper",this.root),this.wrapper.setAttribute("role","grid"),this.wrapper.setAttribute("aria-readonly","true"),this.axis=this.el("div","lt-axis",this.wrapper),this.axis.setAttribute("role","row"),this.tracks=this.el("div","lt-tracks",this.wrapper),this.showLegend&&(this.legendContainer=this.el("div","lt-legend-container",this.wrapper))}updateData(t){this.data=this.validateData(t||[]),this.calculateTimeRange(),this.render()}validateData(t){return t.filter((i,s)=>{const r=["version","ossStart","ossEnd"].filter(l=>!i[l]);if(r.length>0)return console.warn(`[Timeline] Missing fields for item at index ${s}: ${r.join(", ")}`),!1;const a=["ossStart","ossEnd","enterpriseEnd"].filter(l=>i[l]).filter(l=>isNaN(new Date(i[l]).getTime()));return a.length>0?(console.warn(`[Timeline] Invalid date format for item "${i.version}": ${a.join(", ")}`),!1):!0})}calculateTimeRange(){if(this.currentDate=new Date,!this.data.length){this.minYear=this.currentDate.getFullYear()-1,this.maxYear=this.currentDate.getFullYear()+3;return}const t=this.data.flatMap(i=>[new Date(i.ossStart),new Date(i.enterpriseEnd||i.ossEnd)]);this.minYear=new Date(Math.min(...t)).getFullYear(),this.maxYear=new Date(Math.max(...t)).getFullYear()}renderTable(){const t=this.el("table","lt-table",this.tableContainer);t.setAttribute("aria-label","Project support");const i=this.el("thead","",t),s=this.el("tr","",i);[this.t("branch"),this.t("initial"),this.t("ossEnd"),this.t("entEnd")].forEach(e=>{this.el("th","",s).textContent=e}),this.tableBody=this.el("tbody","",t),this.tableRows=this.data.map(e=>this.createTableRow(e)),this.tableToggleContainer=this.el("div","lt-table-toggle",this.tableContainer),this.updateTableVisibility()}createTableRow(t){const i=this.el("tr","",this.tableBody),s=Date.now(),e=new Date(t.ossStart).getTime(),r=new Date(t.ossEnd).getTime(),n=t.enterpriseEnd?new Date(t.enterpriseEnd).getTime():r,a=s>=e&&s<=r?"lt-status-oss":s>r&&s<=n?"lt-status-ent":s>n?"lt-status-expired":"",l=this.el("td","",i);let h=`<span class="lt-table-badge ${a}">${t.versionOriginal||t.version}</span>`;t.releaseNotesUrl?l.innerHTML=`<a href="${t.releaseNotesUrl}" target="_blank" class="lt-table-version-link">${h}</a>`:l.innerHTML=h;const o=this.el("td","",i);o.textContent=t.ossStart,s>e&&(o.className="lt-past-date");const u=this.el("td","",i);u.textContent=t.ossEnd,s>r&&(u.className="lt-past-date");const c=this.el("td","",i);return c.textContent=t.enterpriseEnd||t.ossEnd,s>n&&(c.className="lt-past-date"),{el:i,version:t.version.toLowerCase(),versionOriginal:t.versionOriginal||t.version}}updateTableVisibility(){const t=this.tableRows.filter(e=>e.version.includes(this.filterText));this.tableRows.forEach(e=>{const r=e.el.querySelector(".lt-table-badge");r.innerHTML=this.highlight(e.versionOriginal||e.version),e.el.classList.remove("lt-row-visible"),e.el.classList.add("lt-row-hidden")});const i=this.filterText===""&&t.length>this.visibleCount;if((i&&!this.isExpanded?t.slice(0,this.visibleCount):t).forEach(e=>{e.el.classList.remove("lt-row-hidden"),e.el.classList.add("lt-row-visible")}),this.tableToggleContainer.innerHTML="",i){const e=this.el("button","lt-toggle-btn lt-table-toggle",this.tableToggleContainer),r=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;e.innerHTML=this.isExpanded?`${this.t("less")} ${r}`:`${this.t("more",{n:t.length-this.visibleCount})} ${r}`,e.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}render(){this.showTable&&(this.tableContainer.innerHTML=""),this.axis.innerHTML="",this.tracks.innerHTML="",this.showLegend&&(this.legendContainer.innerHTML=""),this.showTable&&this.renderTable(),this.renderAxis(),this.grid=this.el("div","lt-grid-lines-container",this.tracks),this.indicators=this.el("div","lt-indicators-container",this.tracks),this.renderGrid(),this.renderCurrentDateLine(),this.rows=this.data.map((t,i)=>this.createRow(t,i)),this.toggleContainer=this.el("div","lt-more-toggle",this.tracks,{paddingTop:"10px",display:"flex",justifyContent:"center",position:"relative",zIndex:"10"}),this.updateVisibility(),this.showLegend&&this.renderLegend(),this.setupTooltip()}setupTooltip(){this.tooltip&&this.tooltip.remove(),this.tooltip=this.el("div","lt-tooltip",this.root),this.tooltip.style.display="none",this.tooltip.setAttribute("role","tooltip")}showTooltip(t,i){this.tooltip.innerHTML=i,this.tooltip.style.display="block",this.updateTooltipPos(t)}updateTooltipPos(t){const i=this.root.getBoundingClientRect(),s=12;let e=t.clientX-i.left+s,r=t.clientY-i.top+s;const n=this.tooltip.offsetWidth,a=this.tooltip.offsetHeight;e+n>this.root.offsetWidth&&(e=t.clientX-i.left-n-s),r+a>this.root.offsetHeight&&(r=t.clientY-i.top-a-s),this.tooltip.style.left=`${e}px`,this.tooltip.style.top=`${r}px`}hideTooltip(){this.tooltip&&(this.tooltip.style.display="none")}highlight(t){if(!this.filterText)return t;try{const i=new RegExp(`(${this.filterText})`,"gi");return t.replace(i,'<mark class="lt-highlight-match">$1</mark>')}catch{return t}}el(t,i,s,e={}){const r=document.createElement(t);return i&&(r.className=i),Object.assign(r.style,e),s&&s.appendChild(r),r}renderToolbar(){const t=this.el("div","lt-toolbar",this.root);if(this.filterVersions){const i=this.el("div","lt-filter-container",t);i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>';const s=this.el("input","lt-filter-input",i);s.placeholder=this.t("filter"),s.value=this.filterText,s.setAttribute("aria-label",this.t("filter")),s.oninput=e=>{this.filterText=e.target.value.toLowerCase().trim(),this.updateVisibility()}}if(this.showMajorFilter){const i=this.el("label","lt-checkbox-label",t),s=this.el("input","",i);s.type="checkbox",s.checked=this.majorFilterEnabled,s.onchange=r=>{this.majorFilterEnabled=r.target.checked,this.updateVisibility()};const e=this.el("span","",i);e.textContent=this.t("majorOnly")}}renderThemeToggle(){const t=this.el("button","lt-theme-toggle-btn",this.root);t.title=this.t("dark"),t.setAttribute("aria-label",this.t("dark"));const i={moon:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',sun:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'};t.innerHTML=this.theme==="dark"?i.sun:i.moon,t.onclick=()=>{this.theme=this.theme==="light"?"dark":"light",this.root.setAttribute("data-theme",this.theme),t.innerHTML=this.theme==="dark"?i.sun:i.moon,t.setAttribute("aria-pressed",this.theme==="dark")}}renderLegend(){this.legendContainer.innerHTML="";const t=this.el("div","lt-legend",this.legendContainer);t.setAttribute("role","complementary"),t.setAttribute("aria-label","Support Legend"),["oss","ent","eol"].forEach(i=>{const s=this.el("div",`lt-legend-block ${i==="ent"?"commercial":i}`,t);s.classList.add("lt-legend-item-reactive"),this.activeHighlight===i&&s.classList.add("lt-active-highlight"),s.innerHTML=`
        <div class="lt-legend-icon" aria-hidden="true"></div>
        <div><h3>${this.t(i)}</h3><p>${this.t(i+"Desc")}</p></div>
      `,s.onclick=()=>this.highlightSegment(i)})}highlightSegment(t){this.activeHighlight=this.activeHighlight===t?null:t,this.root.classList.remove("lt-highlight-oss","lt-highlight-ent","lt-highlight-eol"),this.activeHighlight&&this.root.classList.add(`lt-highlight-${this.activeHighlight}`),this.renderLegend()}renderAxis(){this.el("div","",this.axis,{width:"96px",flexShrink:"0"}).setAttribute("role","presentation");for(let i=this.minYear;i<=this.maxYear;i++){const s=this.el("div","lt-year",this.axis);s.textContent=i,s.setAttribute("role","columnheader")}}renderGrid(){const t=new Date(this.minYear,0,1).getTime(),i=new Date(this.maxYear,11,31).getTime()-t;for(let s=this.minYear;s<=this.maxYear;s++){const e=this.el("div","lt-year-grid-line",this.grid);e.style.left=`${(new Date(s,0,1).getTime()-t)/i*100}%`,e.setAttribute("role","presentation")}}createRow(t,i){const s=this.el("div","lt-row row-entrance",this.tracks);s.setAttribute("role","row"),s.style.transitionDelay=`${i*.05}s`;const e=this.el("div","lt-version-label",s);e.setAttribute("role","rowheader");const r=Date.now(),n=new Date(t.ossStart).getTime(),a=new Date(t.ossEnd).getTime(),l=t.enterpriseEnd?new Date(t.enterpriseEnd).getTime():a,h=r>=n&&r<=a?"lt-status-oss":r>a&&r<=l?"lt-status-ent":r>l?"lt-status-expired":"";if(h&&e.classList.add(h),t.isMajor&&e.classList.add("lt-version-major"),t.releaseNotesUrl){const d=this.el("a","lt-version-link",e);d.href=t.releaseNotesUrl,d.target="_blank",d.innerHTML=this.highlight(t.version),d.title=this.t("notes",{v:t.version}),d.setAttribute("aria-label",this.t("notes",{v:t.version}))}else e.innerHTML=this.highlight(t.version);const o=this.el("div","lt-track-container",s);o.setAttribute("role","gridcell");const u=this.splitSupport?t.ossEnd:t.ossStart,c=t.enterpriseEnd||t.ossEnd,p=new Date(this.maxYear,11,31).toISOString().split("T")[0];return o.appendChild(this.createBar(t,c,p,"lt-bar-eol",this.t("eol"))),o.appendChild(this.createBar(t,u,t.enterpriseEnd||t.ossEnd,"lt-bar-ent",this.t("ent"))),o.appendChild(this.createBar(t,t.ossStart,t.ossEnd,"lt-bar-oss",this.t("oss"))),{el:s,version:t.version.toLowerCase(),versionOriginal:t.version,isMajor:t.isMajor}}createBar(t,i,s,e,r){const n=new Date(i).getTime(),a=new Date(s).getTime(),l=new Date(this.minYear,0,1).getTime(),h=new Date(this.maxYear,11,31).getTime()-l,o=this.el("div",`lt-bar-segment ${e}`),u=e==="lt-bar-oss"?"lt-segment-oss":e==="lt-bar-ent"?"lt-segment-ent":"lt-segment-eol";o.classList.add(u),o.style.left=`${(n-l)/h*100}%`,o.style.width=`${(a-n)/h*100}%`,o.setAttribute("role","img"),o.setAttribute("aria-label",`${r}: ${t.version} (${i} to ${s})`),o.tabIndex=0;const c=`
      <div class="lt-tooltip-header">${r} - ${t.version}</div>
      <div class="lt-tooltip-date"><strong>Du:</strong> ${i}</div>
      <div class="lt-tooltip-date"><strong>Au:</strong> ${s}</div>
    `;return o.onmouseenter=p=>this.showTooltip(p,c),o.onmousemove=p=>this.updateTooltipPos(p),o.onmouseleave=()=>this.hideTooltip(),o.onfocus=p=>{const d=o.getBoundingClientRect();this.showTooltip({pageX:d.left+window.scrollX,pageY:d.top+window.scrollY-40},c)},o.onblur=()=>this.hideTooltip(),o}updateVisibility(){const t=this.rows.filter(e=>{const r=e.version.includes(this.filterText),n=this.majorFilterEnabled?e.isMajor:!0;return r&&n});this.rows.forEach(e=>{const r=e.el.querySelector(".lt-version-label"),n=r.querySelector(".lt-version-link");n?n.innerHTML=this.highlight(e.versionOriginal||e.version):r.innerHTML=this.highlight(e.versionOriginal||e.version),e.el.classList.remove("lt-row-visible"),e.el.classList.add("lt-row-hidden")});const i=this.filterText===""&&t.length>this.visibleCount;if((i&&!this.isExpanded?t.slice(0,this.visibleCount):t).forEach(e=>{e.el.classList.remove("lt-row-hidden"),e.el.classList.add("lt-row-visible")}),this.showTable&&this.updateTableVisibility(),this.toggleContainer.innerHTML="",i){const e=this.el("button","lt-toggle-btn",this.toggleContainer),r=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;e.innerHTML=this.isExpanded?`${this.t("less")} ${r}`:`${this.t("more",{n:t.length-this.visibleCount})} ${r}`,e.setAttribute("aria-expanded",this.isExpanded),e.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}renderCurrentDateLine(){const t=new Date(this.minYear,0,1).getTime(),i=new Date(this.maxYear,11,31).getTime()-t,s=Date.now()-t;if(s<0||s>i)return;const e=new Date().toISOString().split("T")[0],r=this.el("div","lt-current-date-indicator",this.indicators);r.style.left=`${s/i*100}%`,r.setAttribute("role","separator"),r.setAttribute("aria-label",this.t("today",{date:e}));const n=this.el("div","lt-current-date-badge",r);n.textContent=e,n.setAttribute("aria-hidden","true")}}const b=[{version:"6.0.x (Current)",ossStart:"2025-01-01",ossEnd:"2026-08-20",enterpriseEnd:"2027-02-15",releaseNotesUrl:"https://example.com/notes"},{version:"5.2.x",ossStart:"2024-06-10",ossEnd:"2025-11-30",enterpriseEnd:"2027-12-01",releaseNotesUrl:"https://example.com/notes",isMajor:!0},{version:"4.4.x",ossStart:"2023-06-10",ossEnd:"2023-11-30",enterpriseEnd:"2024-12-01"},{version:"3.4.x (Extended)",ossStart:"2020-06-10",ossEnd:"2021-11-30",enterpriseEnd:"2023-12-31"},{version:"2.1.x (EOL)",ossStart:"2018-01-01",ossEnd:"2019-12-31",enterpriseEnd:"2020-06-30"}],w=new v("timeline-root",b,{compactMode:!0,splitSupport:!1,visibleCount:3,locale:"fr",showTable:!1,showLegend:!0,filterVersions:!1,showMajorFilter:!0,i18n:{fr:{oss:"Version active",ent:"Version dépréciée",eol:"Fin de vie",filter:"Filtrer les versions...",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *",majorOnly:"Versions majeures uniquement"}}});document.getElementById("update-btn").onclick=()=>{const g=[{version:"7.0.x (Future)",ossStart:"2026-01-01",ossEnd:"2027-06-30",enterpriseEnd:"2028-12-31"},...b];w.updateData(g),alert("Données mises à jour dynamiquement !")};
