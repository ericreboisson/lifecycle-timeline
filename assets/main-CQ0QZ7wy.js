(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();const b={en:{filter:"Filter versions...",oss:"OSS Support",ent:"Enterprise Support",eol:"Out of Support",less:"Show Less",more:"Show {n} more versions",notes:"View Release Notes for {v}",dark:"Toggle Dark Mode",ossDesc:"Free security updates and bugfixes.",entDesc:"Expert support during OSS plus extended support after EOL.",eolDesc:"End of life. No further updates are provided.",today:"Today's date: {date}",branch:"Branch",initial:"Initial Release",ossEnd:"End OSS",entEnd:"End Enterprise *",majorOnly:"Major versions only"},fr:{filter:"Filtrer les versions...",oss:"Support OSS",ent:"Support Entreprise",eol:"Fin de support",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *",majorOnly:"Versions majeures uniquement"}};class v{root;options;visibleCount;showTable;showThemeToggle;showLegend;filterVersions;splitSupport;compactMode;showMajorFilter;isExpanded;theme;filterText;majorFilterEnabled;activeHighlight;translations;locale;data=[];minYear=0;maxYear=0;currentDate=new Date;tableContainer;wrapper;axis;tracks;legendContainer;tableBody;tableRows=[];tableToggleContainer;grid;indicators;rows=[];toggleContainer;tooltip;constructor(t,s,i={}){if(this.root=document.getElementById(t),!this.root){this.options=i,this.visibleCount=3,this.showTable=!0,this.showThemeToggle=!0,this.showLegend=!0,this.filterVersions=!0,this.splitSupport=!1,this.compactMode=!1,this.showMajorFilter=!1,this.isExpanded=!1,this.theme="light",this.filterText="",this.majorFilterEnabled=!1,this.activeHighlight=null,this.translations={},this.locale="en";return}this.options=i,this.visibleCount=i.visibleCount||3,this.showTable=i.showTable!==!1,this.showThemeToggle=i.showThemeToggle!==!1,this.showLegend=i.showLegend!==!1,this.filterVersions=i.filterVersions!==!1,this.splitSupport=i.splitSupport===!0,this.compactMode=i.compactMode===!0,this.showMajorFilter=i.showMajorFilter===!0,this.isExpanded=!1,this.theme="light",this.filterText="",this.majorFilterEnabled=i.majorFilterDefault===!0,this.activeHighlight=null,this.root.classList.add("lt-root"),this.root.classList.toggle("lt-mode-split",this.splitSupport),this.root.classList.toggle("lt-mode-overlay",!this.splitSupport),this.root.classList.toggle("lt-mode-compact",this.compactMode),this.root.setAttribute("data-theme",this.theme),this.translations={...b,...i.i18n||{}},this.locale=i.locale||this.detectLanguage(),this.setupBaseLayout(),this.updateData(s)}detectLanguage(){const t=(navigator.language||"en").split("-")[0];return this.translations[t]?t:"en"}t(t,s={}){let i=(this.translations[this.locale]||this.translations.en)[t]||t;return Object.keys(s).forEach(e=>i=i.replace(`{${e}}`,s[e])),i}setupBaseLayout(){this.root&&(this.root.innerHTML="",this.root.setAttribute("role","application"),this.root.setAttribute("aria-label","Product Lifecycle Timeline"),this.renderToolbar(),this.showThemeToggle&&this.renderThemeToggle(),this.showTable&&(this.tableContainer=this.el("div","lt-table-container",this.root)),this.wrapper=this.el("div","lt-wrapper",this.root),this.wrapper.setAttribute("role","grid"),this.wrapper.setAttribute("aria-readonly","true"),this.axis=this.el("div","lt-axis",this.wrapper),this.axis.setAttribute("role","row"),this.tracks=this.el("div","lt-tracks",this.wrapper),this.showLegend&&(this.legendContainer=this.el("div","lt-legend-container",this.wrapper)))}updateData(t){this.data=this.validateData(t||[]),this.calculateTimeRange(),this.render()}validateData(t){return t.filter((s,i)=>{const r=["version","ossStart","ossEnd"].filter(l=>!s[l]);if(r.length>0)return console.warn(`[Timeline] Missing fields for item at index ${i}: ${r.join(", ")}`),!1;const a=["ossStart","ossEnd","enterpriseEnd"].filter(l=>s[l]).filter(l=>isNaN(new Date(s[l]).getTime()));return a.length>0?(console.warn(`[Timeline] Invalid date format for item "${s.version}": ${a.join(", ")}`),!1):!0})}calculateTimeRange(){if(this.currentDate=new Date,!this.data.length){this.minYear=this.currentDate.getFullYear()-1,this.maxYear=this.currentDate.getFullYear()+3;return}const t=this.data.flatMap(s=>[new Date(s.ossStart).getTime(),new Date(s.enterpriseEnd||s.ossEnd).getTime()]);this.minYear=new Date(Math.min(...t)).getFullYear(),this.maxYear=new Date(Math.max(...t)).getFullYear()}renderTable(){const t=this.el("table","lt-table",this.tableContainer);t.setAttribute("aria-label","Project support");const s=this.el("thead","",t),i=this.el("tr","",s);[this.t("branch"),this.t("initial"),this.t("ossEnd"),this.t("entEnd")].forEach(e=>{this.el("th","",i).textContent=e}),this.tableBody=this.el("tbody","",t),this.tableRows=this.data.map(e=>this.createTableRow(e)),this.tableToggleContainer=this.el("div","lt-table-toggle",this.tableContainer),this.updateTableVisibility()}createTableRow(t){const s=this.el("tr","",this.tableBody),i=Date.now(),e=new Date(t.ossStart).getTime(),r=new Date(t.ossEnd).getTime(),o=t.enterpriseEnd?new Date(t.enterpriseEnd).getTime():r,a=i>=e&&i<=r?"lt-status-oss":i>r&&i<=o?"lt-status-ent":i>o?"lt-status-expired":"",l=this.el("td","",s);let h=`<span class="lt-table-badge ${a}">${t.version}</span>`;t.releaseNotesUrl?l.innerHTML=`<a href="${t.releaseNotesUrl}" target="_blank" class="lt-table-version-link">${h}</a>`:l.innerHTML=h;const n=this.el("td","",s);n.textContent=t.ossStart,i>e&&(n.className="lt-past-date");const u=this.el("td","",s);u.textContent=t.ossEnd,i>r&&(u.className="lt-past-date");const c=this.el("td","",s);return c.textContent=t.enterpriseEnd||t.ossEnd,i>o&&(c.className="lt-past-date"),{el:s,version:t.version.toLowerCase(),versionOriginal:t.version}}updateTableVisibility(){const t=this.tableRows.filter(e=>e.version.includes(this.filterText));this.tableRows.forEach(e=>{const r=e.el.querySelector(".lt-table-badge");r&&(r.innerHTML=this.highlight(e.versionOriginal||e.version)),e.el.classList.remove("lt-row-visible"),e.el.classList.add("lt-row-hidden")});const s=this.filterText===""&&t.length>this.visibleCount;if((s&&!this.isExpanded?t.slice(0,this.visibleCount):t).forEach(e=>{e.el.classList.remove("lt-row-hidden"),e.el.classList.add("lt-row-visible")}),this.tableToggleContainer.innerHTML="",s){const e=this.el("button","lt-toggle-btn lt-table-toggle",this.tableToggleContainer),r=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;e.innerHTML=this.isExpanded?`${this.t("less")} ${r}`:`${this.t("more",{n:t.length-this.visibleCount})} ${r}`,e.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}render(){this.showTable&&(this.tableContainer.innerHTML=""),this.axis.innerHTML="",this.tracks.innerHTML="",this.showLegend&&(this.legendContainer.innerHTML=""),this.showTable&&this.renderTable(),this.renderAxis(),this.grid=this.el("div","lt-grid-lines-container",this.tracks),this.indicators=this.el("div","lt-indicators-container",this.tracks),this.renderGrid(),this.renderCurrentDateLine(),this.rows=this.data.map((t,s)=>this.createRow(t,s)),this.toggleContainer=this.el("div","lt-more-toggle",this.tracks,{paddingTop:"10px",display:"flex",justifyContent:"center",position:"relative",zIndex:"10"}),this.updateVisibility(),this.showLegend&&this.renderLegend(),this.setupTooltip()}setupTooltip(){this.tooltip&&this.tooltip.remove(),this.tooltip=this.el("div","lt-tooltip",this.root),this.tooltip.style.display="none",this.tooltip.setAttribute("role","tooltip")}showTooltip(t,s){this.tooltip.innerHTML=s,this.tooltip.style.display="block",this.updateTooltipPos(t)}updateTooltipPos(t){if(!this.root)return;const s=this.root.getBoundingClientRect(),i=12,e="clientX"in t?t.clientX:t.pageX-window.scrollX,r="clientY"in t?t.clientY:t.pageY-window.scrollY;let o=(e||0)-s.left+i,a=(r||0)-s.top+i;const l=this.tooltip.offsetWidth,h=this.tooltip.offsetHeight;o+l>this.root.offsetWidth&&(o=(e||0)-s.left-l-i),a+h>this.root.offsetHeight&&(a=(r||0)-s.top-h-i),this.tooltip.style.left=`${o}px`,this.tooltip.style.top=`${a}px`}hideTooltip(){this.tooltip&&(this.tooltip.style.display="none")}highlight(t){if(!this.filterText)return t;try{const s=new RegExp(`(${this.filterText})`,"gi");return t.replace(s,'<mark class="lt-highlight-match">$1</mark>')}catch{return t}}el(t,s,i,e={}){const r=document.createElement(t);return s&&(r.className=s),Object.assign(r.style,e),i&&i.appendChild(r),r}renderToolbar(){if(!this.root)return;const t=this.el("div","lt-toolbar",this.root);if(this.filterVersions){const s=this.el("div","lt-filter-container",t);s.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>';const i=this.el("input","lt-filter-input",s);i.placeholder=this.t("filter"),i.value=this.filterText,i.setAttribute("aria-label",this.t("filter")),i.oninput=e=>{this.filterText=e.target.value.toLowerCase().trim(),this.updateVisibility()}}if(this.showMajorFilter){const s=this.el("label","lt-checkbox-label",t),i=this.el("input","",s);i.type="checkbox",i.checked=this.majorFilterEnabled,i.onchange=r=>{this.majorFilterEnabled=r.target.checked,this.updateVisibility()};const e=this.el("span","",s);e.textContent=this.t("majorOnly")}}renderThemeToggle(){if(!this.root)return;const t=this.el("button","lt-theme-toggle-btn",this.root);t.title=this.t("dark"),t.setAttribute("aria-label",this.t("dark"));const s={moon:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',sun:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'};t.innerHTML=this.theme==="dark"?s.sun:s.moon,t.onclick=()=>{this.theme=this.theme==="light"?"dark":"light",this.root.setAttribute("data-theme",this.theme),t.innerHTML=this.theme==="dark"?s.sun:s.moon,t.setAttribute("aria-pressed",(this.theme==="dark").toString())}}renderLegend(){this.legendContainer.innerHTML="";const t=this.el("div","lt-legend",this.legendContainer);t.setAttribute("role","complementary"),t.setAttribute("aria-label","Support Legend"),["oss","ent","eol"].forEach(s=>{const i=this.el("div",`lt-legend-block ${s==="ent"?"commercial":s}`,t);i.classList.add("lt-legend-item-reactive"),this.activeHighlight===s&&i.classList.add("lt-active-highlight"),i.innerHTML=`
        <div class="lt-legend-icon" aria-hidden="true"></div>
        <div><h3>${this.t(s)}</h3><p>${this.t(s+"Desc")}</p></div>
      `,i.onclick=()=>this.highlightSegment(s)})}highlightSegment(t){this.root&&(this.activeHighlight=this.activeHighlight===t?null:t,this.root.classList.remove("lt-highlight-oss","lt-highlight-ent","lt-highlight-eol"),this.activeHighlight&&this.root.classList.add(`lt-highlight-${this.activeHighlight}`),this.renderLegend())}renderAxis(){this.el("div","",this.axis,{width:"106px",flexShrink:"0"}).setAttribute("role","presentation");for(let s=this.minYear;s<=this.maxYear;s++){const i=this.el("div","lt-year",this.axis);i.textContent=s.toString(),i.setAttribute("role","columnheader")}}renderGrid(){const t=new Date(this.minYear,0,1).getTime(),s=new Date(this.maxYear,11,31).getTime()-t;for(let i=this.minYear;i<=this.maxYear;i++){const e=this.el("div","lt-year-grid-line",this.grid);e.style.left=`${(new Date(i,0,1).getTime()-t)/s*100}%`,e.setAttribute("role","presentation")}}createRow(t,s){const i=this.el("div","lt-row row-entrance",this.tracks);i.setAttribute("role","row"),i.style.transitionDelay=`${s*.05}s`;const e=this.el("div","lt-version-label",i);e.setAttribute("role","rowheader");const r=Date.now(),o=new Date(t.ossStart).getTime(),a=new Date(t.ossEnd).getTime(),l=t.enterpriseEnd?new Date(t.enterpriseEnd).getTime():a,h=r<o?"lt-status-future":r>=o&&r<=a?"lt-status-oss":r>a&&r<=l?"lt-status-ent":r>l?"lt-status-expired":"";if(h&&e.classList.add(h),t.isMajor&&e.classList.add("lt-version-major"),t.releaseNotesUrl){const p=this.el("a","lt-version-link",e);p.href=t.releaseNotesUrl,p.target="_blank",p.innerHTML=this.highlight(t.version),p.title=this.t("notes",{v:t.version}),p.setAttribute("aria-label",this.t("notes",{v:t.version}))}else e.innerHTML=this.highlight(t.version),e.title=t.version;const n=this.el("div","lt-track-container",i);n.setAttribute("role","gridcell");const u=this.splitSupport?t.ossEnd:t.ossStart,c=t.enterpriseEnd||t.ossEnd,d=new Date(this.maxYear,11,31).toISOString().split("T")[0];return n.appendChild(this.createBar(t,c,d,"lt-bar-eol",this.t("eol"))),n.appendChild(this.createBar(t,u,t.enterpriseEnd||t.ossEnd,"lt-bar-ent",this.t("ent"))),n.appendChild(this.createBar(t,t.ossStart,t.ossEnd,"lt-bar-oss",this.t("oss"))),{el:i,version:t.version.toLowerCase(),versionOriginal:t.version,isMajor:t.isMajor}}createBar(t,s,i,e,r){const o=new Date(s).getTime(),a=new Date(i).getTime(),l=new Date(this.minYear,0,1).getTime(),h=new Date(this.maxYear,11,31).getTime()-l,n=this.el("div",`lt-bar-segment ${e}`),u=e==="lt-bar-oss"?"lt-segment-oss":e==="lt-bar-ent"?"lt-segment-ent":"lt-segment-eol";n.classList.add(u),n.style.left=`${(o-l)/h*100}%`,n.style.width=`${(a-o)/h*100}%`,n.setAttribute("role","img"),n.setAttribute("aria-label",`${r}: ${t.version} (${s} to ${i})`),n.tabIndex=0;const c=`
      <div class="lt-tooltip-header">${r} - ${t.version}</div>
      <div class="lt-tooltip-date"><strong>Du:</strong> ${s}</div>
      <div class="lt-tooltip-date"><strong>Au:</strong> ${i}</div>
    `;return n.onmouseenter=d=>this.showTooltip(d,c),n.onmousemove=d=>this.updateTooltipPos(d),n.onmouseleave=()=>this.hideTooltip(),n.onfocus=()=>{const d=n.getBoundingClientRect();this.showTooltip({pageX:d.left+window.scrollX,pageY:d.top+window.scrollY-40},c)},n.onblur=()=>this.hideTooltip(),n}updateVisibility(){const t=this.rows.filter(e=>{const r=e.version.includes(this.filterText),o=this.majorFilterEnabled?e.isMajor:!0;return r&&o});this.rows.forEach(e=>{const r=e.el.querySelector(".lt-version-label"),o=r.querySelector(".lt-version-link");o?o.innerHTML=this.highlight(e.versionOriginal||e.version):r.innerHTML=this.highlight(e.versionOriginal||e.version),e.el.classList.remove("lt-row-visible"),e.el.classList.add("lt-row-hidden")});const s=this.filterText===""&&t.length>this.visibleCount;if((s&&!this.isExpanded?t.slice(0,this.visibleCount):t).forEach(e=>{e.el.classList.remove("lt-row-hidden"),e.el.classList.add("lt-row-visible")}),this.showTable&&this.updateTableVisibility(),this.toggleContainer.innerHTML="",s){const e=this.el("button","lt-toggle-btn",this.toggleContainer),r=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;e.innerHTML=this.isExpanded?`${this.t("less")} ${r}`:`${this.t("more",{n:t.length-this.visibleCount})} ${r}`,e.setAttribute("aria-expanded",this.isExpanded.toString()),e.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}renderCurrentDateLine(){const t=new Date(this.minYear,0,1).getTime(),s=new Date(this.maxYear,11,31).getTime()-t,i=Date.now()-t;if(i<0||i>s)return;const e=new Date().toISOString().split("T")[0],r=this.el("div","lt-current-date-indicator",this.indicators);r.style.left=`${i/s*100}%`,r.setAttribute("role","separator"),r.setAttribute("aria-label",this.t("today",{date:e}));const o=this.el("div","lt-current-date-badge",r);o.textContent=e,o.setAttribute("aria-hidden","true")}}const f=[{version:"6.0.x (Current)",ossStart:"2025-01-01",ossEnd:"2026-08-20",enterpriseEnd:"2027-02-15",releaseNotesUrl:"https://example.com/notes"},{version:"5.2.x",ossStart:"2024-06-10",ossEnd:"2025-11-30",enterpriseEnd:"2027-12-01",releaseNotesUrl:"https://example.com/notes",isMajor:!0},{version:"4.4.x",ossStart:"2023-06-10",ossEnd:"2023-11-30",enterpriseEnd:"2024-12-01"},{version:"3.4.x (Extended)",ossStart:"2020-06-10",ossEnd:"2021-11-30",enterpriseEnd:"2023-12-31"},{version:"2.1.x (EOL)",ossStart:"2018-01-01",ossEnd:"2019-12-31",enterpriseEnd:"2020-06-30"}],w=new v("timeline-root",f,{compactMode:!1,splitSupport:!1,visibleCount:3,locale:"fr",showTable:!1,showLegend:!0,filterVersions:!1,showMajorFilter:!0,majorFilterDefault:!0,i18n:{fr:{oss:"Version active",ent:"Version dépréciée",eol:"Fin de vie",filter:"Filtrer les versions...",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *",majorOnly:"Versions majeures uniquement"}}});document.getElementById("update-btn").onclick=()=>{const g=[{version:"7.0.x (Future) another-super-long-name-causing-overlap",ossStart:"2027-01-01",ossEnd:"2028-06-30",enterpriseEnd:"2029-12-31"},...f];w.updateData(g),alert("Données mises à jour dynamiquement !")};
