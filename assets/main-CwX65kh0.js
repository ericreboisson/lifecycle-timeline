(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const x={en:{filter:"Filter versions...",oss:"OSS Support",ent:"Enterprise Support",eol:"Out of Support",less:"Show Less",more:"Show {n} more versions",notes:"View Release Notes for {v}",dark:"Toggle Dark Mode",ossDesc:"Free security updates and bugfixes.",entDesc:"Expert support during OSS plus extended support after EOL.",eolDesc:"End of life. No further updates are provided.",today:"Today's date: {date}",branch:"Branch",initial:"Initial Release",ossEnd:"End OSS",entEnd:"End Enterprise *",majorOnly:"Major versions only",future:"Future Version",futureDesc:"Planned version not yet released.",fictive:"Fictive Version",fictiveDesc:"Disabled or representative version."},fr:{filter:"Filtrer les versions...",oss:"Support OSS",ent:"Support Entreprise",eol:"Fin de support",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *",majorOnly:"Versions majeures uniquement",future:"Version future",futureDesc:"Version prévue non encore sortie.",fictive:"Version fictive",fictiveDesc:"Version désactivée ou indicative."}};class E{root;options;visibleCount;showTable;showThemeToggle;showLegend;filterVersions;splitSupport;compactMode;showMajorFilter;isExpanded;theme;filterText;majorFilterEnabled;activeHighlight;translations;locale;data=[];minYear=0;maxYear=0;currentDate=new Date;tableContainer;wrapper;axis;tracks;legendContainer;tableBody;tableRows=[];tableToggleContainer;grid;indicators;rows=[];toggleContainer;tooltip;constructor(t,i,s={}){if(this.root=document.getElementById(t),!this.root){this.options=s,this.visibleCount=3,this.showTable=!0,this.showThemeToggle=!0,this.showLegend=!0,this.filterVersions=!0,this.splitSupport=!1,this.compactMode=!1,this.showMajorFilter=!1,this.isExpanded=!1,this.theme="light",this.filterText="",this.majorFilterEnabled=!1,this.activeHighlight=null,this.translations={},this.locale="en";return}this.options=s,this.visibleCount=s.visibleCount||3,this.showTable=s.showTable!==!1,this.showThemeToggle=s.showThemeToggle!==!1,this.showLegend=s.showLegend!==!1,this.filterVersions=s.filterVersions!==!1,this.splitSupport=s.splitSupport===!0,this.compactMode=s.compactMode===!0,this.showMajorFilter=s.showMajorFilter===!0,this.isExpanded=!1,this.theme="light",this.filterText="",this.majorFilterEnabled=s.majorFilterDefault===!0,this.activeHighlight=null,this.root.classList.add("lt-root"),this.root.classList.toggle("lt-mode-split",this.splitSupport),this.root.classList.toggle("lt-mode-overlay",!this.splitSupport),this.root.classList.toggle("lt-mode-compact",this.compactMode),this.root.setAttribute("data-theme",this.theme),this.translations={...x},s.i18n&&Object.keys(s.i18n).forEach(e=>{this.translations[e]={...this.translations[e]||this.translations.en||{},...s.i18n[e]||{}}}),this.locale=s.locale||this.detectLanguage(),this.setupBaseLayout(),this.updateData(i)}detectLanguage(){const t=(navigator.language||"en").split("-")[0];return this.translations[t]?t:"en"}t(t,i={}){let s=(this.translations[this.locale]||this.translations.en)[t]||t;return Object.keys(i).forEach(e=>s=s.replace(`{${e}}`,i[e])),s}setupBaseLayout(){this.root&&(this.root.innerHTML="",this.root.setAttribute("role","application"),this.root.setAttribute("aria-label","Product Lifecycle Timeline"),this.renderToolbar(),this.showThemeToggle&&this.renderThemeToggle(),this.showTable&&(this.tableContainer=this.el("div","lt-table-container",this.root)),this.wrapper=this.el("div","lt-wrapper",this.root),this.wrapper.setAttribute("role","grid"),this.wrapper.setAttribute("aria-readonly","true"),this.axis=this.el("div","lt-axis",this.wrapper),this.axis.setAttribute("role","row"),this.tracks=this.el("div","lt-tracks",this.wrapper),this.showLegend&&(this.legendContainer=this.el("div","lt-legend-container",this.wrapper)))}updateData(t){this.data=this.validateData(t||[]),this.calculateTimeRange(),this.render()}validateData(t){return t.filter(i=>{if(!i.ossStart||!i.ossEnd)return!0;const e=["ossStart","ossEnd","enterpriseEnd"].filter(r=>i[r]).filter(r=>isNaN(new Date(i[r]).getTime()));return e.length>0?(console.warn(`[Timeline] Invalid date format for item "${i.version}": ${e.join(", ")}`),!1):!0})}calculateTimeRange(){if(this.currentDate=new Date,!this.data.length){this.minYear=this.currentDate.getFullYear()-1,this.maxYear=this.currentDate.getFullYear()+3;return}const t=this.data.filter(i=>i.ossStart&&i.ossEnd).flatMap(i=>[new Date(i.ossStart).getTime(),new Date(i.enterpriseEnd||i.ossEnd).getTime()]);if(t.length===0){this.minYear=this.currentDate.getFullYear()-1,this.maxYear=this.currentDate.getFullYear()+3;return}this.minYear=new Date(Math.min(...t)).getFullYear(),this.maxYear=new Date(Math.max(...t)).getFullYear()}renderTable(){const t=this.el("table","lt-table",this.tableContainer);t.setAttribute("aria-label","Project support");const i=this.el("thead","",t),s=this.el("tr","",i);[this.t("branch"),this.t("initial"),this.t("ossEnd"),this.t("entEnd")].forEach(e=>{this.el("th","",s).textContent=e}),this.tableBody=this.el("tbody","",t),this.tableRows=this.data.map(e=>this.createTableRow(e)),this.tableToggleContainer=this.el("div","lt-table-toggle",this.tableContainer),this.updateTableVisibility()}createTableRow(t){const i=this.el("tr","",this.tableBody),s=Date.now(),e=t.ossStart?new Date(t.ossStart).getTime():0,r=t.ossEnd?new Date(t.ossEnd).getTime():0,o=t.enterpriseEnd?new Date(t.enterpriseEnd).getTime():r,h=t.isFictive||!t.ossStart||!t.ossEnd?"lt-status-fictive":t.isFuture?"lt-status-is-future":s>=e&&s<=r?"lt-status-oss":s>r&&s<=o?"lt-status-ent":s>o?"lt-status-expired":"",d=this.el("td","",i);let n=`<span class="lt-table-badge ${h}">${t.version}</span>`;t.releaseNotesUrl?d.innerHTML=`<a href="${t.releaseNotesUrl}" target="_blank" class="lt-table-version-link">${n}</a>`:d.innerHTML=n;const c=this.el("td","",i);c.textContent=t.ossStart||"-",t.ossStart&&s>e&&(c.className="lt-past-date");const u=this.el("td","",i);u.textContent=t.ossEnd||"-",t.ossEnd&&s>r&&(u.className="lt-past-date");const l=this.el("td","",i);return l.textContent=t.enterpriseEnd||t.ossEnd||"-",(t.enterpriseEnd||t.ossEnd)&&s>o&&(l.className="lt-past-date"),{el:i,version:t.version.toLowerCase(),versionOriginal:t.version}}updateTableVisibility(){const t=this.tableRows.filter(e=>e.version.includes(this.filterText));this.tableRows.forEach(e=>{const r=e.el.querySelector(".lt-table-badge");r&&(r.innerHTML=this.highlight(e.versionOriginal||e.version)),e.el.classList.remove("lt-row-visible"),e.el.classList.add("lt-row-hidden")});const i=this.filterText===""&&t.length>this.visibleCount;if((i&&!this.isExpanded?t.slice(0,this.visibleCount):t).forEach(e=>{e.el.classList.remove("lt-row-hidden"),e.el.classList.add("lt-row-visible")}),this.tableToggleContainer.innerHTML="",i){const e=this.el("button","lt-toggle-btn lt-table-toggle",this.tableToggleContainer),r=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;e.innerHTML=this.isExpanded?`${this.t("less")} ${r}`:`${this.t("more",{n:t.length-this.visibleCount})} ${r}`,e.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}render(){this.showTable&&(this.tableContainer.innerHTML=""),this.axis.innerHTML="",this.tracks.innerHTML="",this.showLegend&&(this.legendContainer.innerHTML=""),this.showTable&&this.renderTable(),this.renderAxis(),this.grid=this.el("div","lt-grid-lines-container",this.tracks),this.indicators=this.el("div","lt-indicators-container",this.tracks),this.renderGrid(),this.renderCurrentDateLine(),this.rows=this.data.map((t,i)=>this.createRow(t,i)),this.toggleContainer=this.el("div","lt-more-toggle",this.tracks,{paddingTop:"10px",display:"flex",justifyContent:"center",position:"relative",zIndex:"10"}),this.updateVisibility(),this.showLegend&&this.renderLegend(),this.setupTooltip()}setupTooltip(){this.tooltip&&this.tooltip.remove(),this.tooltip=this.el("div","lt-tooltip",this.root),this.tooltip.style.display="none",this.tooltip.setAttribute("role","tooltip")}showTooltip(t,i){this.tooltip.innerHTML=i,this.tooltip.style.display="block",this.updateTooltipPos(t)}updateTooltipPos(t){if(!this.root)return;const i=this.root.getBoundingClientRect(),s=12,e="clientX"in t?t.clientX:t.pageX-window.scrollX,r="clientY"in t?t.clientY:t.pageY-window.scrollY;let o=(e||0)-i.left+s,a=(r||0)-i.top+s;const h=this.tooltip.offsetWidth,d=this.tooltip.offsetHeight;o+h>this.root.offsetWidth&&(o=(e||0)-i.left-h-s),a+d>this.root.offsetHeight&&(a=(r||0)-i.top-d-s),this.tooltip.style.left=`${o}px`,this.tooltip.style.top=`${a}px`}hideTooltip(){this.tooltip&&(this.tooltip.style.display="none")}highlight(t){if(!this.filterText)return t;try{const i=new RegExp(`(${this.filterText})`,"gi");return t.replace(i,'<mark class="lt-highlight-match">$1</mark>')}catch{return t}}el(t,i,s,e={}){const r=document.createElement(t);return i&&(r.className=i),Object.assign(r.style,e),s&&s.appendChild(r),r}renderToolbar(){if(!this.root)return;const t=this.el("div","lt-toolbar",this.root);if(this.filterVersions){const i=this.el("div","lt-filter-container",t);i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>';const s=this.el("input","lt-filter-input",i);s.placeholder=this.t("filter"),s.value=this.filterText,s.setAttribute("aria-label",this.t("filter")),s.oninput=e=>{this.filterText=e.target.value.toLowerCase().trim(),this.updateVisibility()}}if(this.showMajorFilter){const i=this.el("label","lt-checkbox-label",t),s=this.el("input","",i);s.type="checkbox",s.checked=this.majorFilterEnabled,s.onchange=r=>{this.majorFilterEnabled=r.target.checked,this.updateVisibility()};const e=this.el("span","",i);e.textContent=this.t("majorOnly")}}renderThemeToggle(){if(!this.root)return;const t=this.el("button","lt-theme-toggle-btn",this.root);t.title=this.t("dark"),t.setAttribute("aria-label",this.t("dark"));const i={moon:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',sun:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'};t.innerHTML=this.theme==="dark"?i.sun:i.moon,t.onclick=()=>{this.theme=this.theme==="light"?"dark":"light",this.root.setAttribute("data-theme",this.theme),t.innerHTML=this.theme==="dark"?i.sun:i.moon,t.setAttribute("aria-pressed",(this.theme==="dark").toString())}}renderLegend(){this.legendContainer.innerHTML="";const t=this.el("div","lt-legend",this.legendContainer);t.setAttribute("role","complementary"),t.setAttribute("aria-label","Support Legend"),["oss","ent","eol","future","fictive"].forEach(s=>{const e=this.el("div",`lt-legend-block ${s==="ent"?"commercial":s}`,t);e.classList.add("lt-legend-item-reactive"),this.activeHighlight===s&&e.classList.add("lt-active-highlight"),e.innerHTML=`
        <div class="lt-legend-icon" aria-hidden="true"></div>
        <div><h3>${this.t(s)}</h3><p>${this.t(s+"Desc")}</p></div>
      `,e.onclick=()=>this.highlightSegment(s)})}highlightSegment(t){this.root&&(this.activeHighlight=this.activeHighlight===t?null:t,this.root.classList.remove("lt-highlight-oss","lt-highlight-ent","lt-highlight-eol","lt-highlight-future","lt-highlight-fictive"),this.activeHighlight&&this.root.classList.add(`lt-highlight-${this.activeHighlight}`),this.renderLegend())}renderAxis(){this.el("div","",this.axis,{width:"106px",flexShrink:"0"}).setAttribute("role","presentation");for(let i=this.minYear;i<=this.maxYear;i++){const s=this.el("div","lt-year",this.axis);s.textContent=i.toString(),s.setAttribute("role","columnheader")}}renderGrid(){const t=new Date(this.minYear,0,1).getTime(),i=new Date(this.maxYear,11,31).getTime()-t;for(let s=this.minYear;s<=this.maxYear;s++){const e=this.el("div","lt-year-grid-line",this.grid);e.style.left=`${(new Date(s,0,1).getTime()-t)/i*100}%`,e.setAttribute("role","presentation")}}createRow(t,i){const s=this.el("div","lt-row row-entrance",this.tracks);s.setAttribute("role","row"),s.style.transitionDelay=`${i*.05}s`;const e=this.el("div","lt-version-label",s);e.setAttribute("role","rowheader");const r=Date.now(),o=t.ossStart?new Date(t.ossStart).getTime():0,a=t.ossEnd?new Date(t.ossEnd).getTime():0,h=t.enterpriseEnd?new Date(t.enterpriseEnd).getTime():a,n=t.isFictive||!t.ossStart||!t.ossEnd?"lt-status-fictive":t.isFuture?"lt-status-is-future":r<o?"lt-status-future":r>=o&&r<=a?"lt-status-oss":r>a&&r<=h?"lt-status-ent":r>h?"lt-status-expired":"";if(n&&e.classList.add(n),t.isMajor&&e.classList.add("lt-version-major"),t.releaseNotesUrl){const p=this.el("a","lt-version-link",e);p.href=t.releaseNotesUrl,p.target="_blank",p.innerHTML=this.highlight(t.version),p.title=this.t("notes",{v:t.version}),p.setAttribute("aria-label",this.t("notes",{v:t.version}))}else e.innerHTML=this.highlight(t.version),e.title=t.version;const c=this.el("div","lt-track-container",s);if(c.setAttribute("role","gridcell"),!t.ossStart||!t.ossEnd)return{el:s,version:t.version.toLowerCase(),versionOriginal:t.version,isMajor:t.isMajor};const l=this.splitSupport?t.ossEnd:t.ossStart,m=t.enterpriseEnd||t.ossEnd,T=new Date(this.maxYear,11,31).toISOString().split("T")[0],v=this.createBar(t,m,T,"lt-bar-eol",this.t("eol")),b=this.createBar(t,l,t.enterpriseEnd||t.ossEnd,"lt-bar-ent",this.t("ent")),f=this.createBar(t,t.ossStart,t.ossEnd,"lt-bar-oss",this.t("oss"));return t.isFictive?(v.classList.add("lt-is-fictive-bar"),b.classList.add("lt-is-fictive-bar"),f.classList.add("lt-is-fictive-bar")):t.isFuture&&f.classList.add("lt-is-future-oss"),c.appendChild(v),c.appendChild(b),c.appendChild(f),{el:s,version:t.version.toLowerCase(),versionOriginal:t.version,isMajor:t.isMajor}}createBar(t,i,s,e,r){const o=new Date(i).getTime(),a=new Date(s).getTime(),h=new Date(this.minYear,0,1).getTime(),d=new Date(this.maxYear,11,31).getTime()-h,n=this.el("div",`lt-bar-segment ${e}`),c=e==="lt-bar-oss"?"lt-segment-oss":e==="lt-bar-ent"?"lt-segment-ent":"lt-segment-eol";n.classList.add(c),n.style.left=`${(o-h)/d*100}%`,n.style.width=`${(a-o)/d*100}%`,n.setAttribute("role","img"),n.setAttribute("aria-label",`${r}: ${t.version} (${i} to ${s})`),n.tabIndex=0;const u=`
      <div class="lt-tooltip-header">${r} - ${t.version}</div>
      <div class="lt-tooltip-date"><strong>Du:</strong> ${i}</div>
      <div class="lt-tooltip-date"><strong>Au:</strong> ${s}</div>
    `;return n.onmouseenter=l=>this.showTooltip(l,u),n.onmousemove=l=>this.updateTooltipPos(l),n.onmouseleave=()=>this.hideTooltip(),n.onfocus=()=>{const l=n.getBoundingClientRect();this.showTooltip({pageX:l.left+window.scrollX,pageY:l.top+window.scrollY-40},u)},n.onblur=()=>this.hideTooltip(),n}updateVisibility(){const t=this.rows.filter(e=>{const r=e.version.includes(this.filterText),o=this.majorFilterEnabled?e.isMajor:!0;return r&&o});this.rows.forEach(e=>{const r=e.el.querySelector(".lt-version-label"),o=r.querySelector(".lt-version-link");o?o.innerHTML=this.highlight(e.versionOriginal||e.version):r.innerHTML=this.highlight(e.versionOriginal||e.version),e.el.classList.remove("lt-row-visible"),e.el.classList.add("lt-row-hidden")});const i=this.filterText===""&&t.length>this.visibleCount;if((i&&!this.isExpanded?t.slice(0,this.visibleCount):t).forEach(e=>{e.el.classList.remove("lt-row-hidden"),e.el.classList.add("lt-row-visible")}),this.showTable&&this.updateTableVisibility(),this.toggleContainer.innerHTML="",i){const e=this.el("button","lt-toggle-btn",this.toggleContainer),r=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;e.innerHTML=this.isExpanded?`${this.t("less")} ${r}`:`${this.t("more",{n:t.length-this.visibleCount})} ${r}`,e.setAttribute("aria-expanded",this.isExpanded.toString()),e.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}renderCurrentDateLine(){const t=new Date(this.minYear,0,1).getTime(),i=new Date(this.maxYear,11,31).getTime()-t,s=Date.now()-t;if(s<0||s>i)return;const e=new Date().toISOString().split("T")[0],r=this.el("div","lt-current-date-indicator",this.indicators);r.style.left=`${s/i*100}%`,r.setAttribute("role","separator"),r.setAttribute("aria-label",this.t("today",{date:e}));const o=this.el("div","lt-current-date-badge",r);o.textContent=e,o.setAttribute("aria-hidden","true")}}const w=[{version:"7.0.x (Next)",ossStart:"2026-06-01",ossEnd:"2027-12-31",enterpriseEnd:"2029-12-31",isFuture:!0},{version:"6.0.x (Current)",ossStart:"2025-01-01",ossEnd:"2026-08-20",enterpriseEnd:"2027-02-15",releaseNotesUrl:"https://example.com/notes"},{version:"5.2.x",ossStart:"2024-06-10",ossEnd:"2025-11-30",enterpriseEnd:"2027-12-01",releaseNotesUrl:"https://example.com/notes",isMajor:!0},{version:"4.4.x",ossStart:"2023-06-10",ossEnd:"2023-11-30",enterpriseEnd:"2024-12-01"},{version:"1111.0.x (Fictive)",ossStart:"2016-01-01",ossEnd:"2017-12-31"},{version:"3.4.x (Extended)",ossStart:"2020-06-10",ossEnd:"2021-11-30",enterpriseEnd:"2023-12-31"},{version:"No Dates (Fictive)"},{version:"2.1.x (EOL)",ossStart:"2018-01-01",ossEnd:"2019-12-31",enterpriseEnd:"2020-06-30"}],y=new E("timeline-root",w,{compactMode:!1,splitSupport:!1,visibleCount:3,locale:"fr",showTable:!1,showLegend:!0,filterVersions:!1,showMajorFilter:!0,majorFilterDefault:!0,i18n:{fr:{oss:"Version active",ent:"Version dépréciée",eol:"Fin de vie",future:"Version future",fictive:"Version fictive",filter:"Filtrer les versions...",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *",majorOnly:"Versions majeures uniquement"}}});document.getElementById("update-btn").onclick=()=>{const g=[{version:"7.0.x (Future) another-super-long-name-causing-overlap",ossStart:"2027-01-01",ossEnd:"2028-06-30",enterpriseEnd:"2029-12-31"},...w];y.updateData(g),alert("Données mises à jour dynamiquement !")};
