(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const b={en:{filter:"Filter versions...",oss:"OSS Support",ent:"Enterprise Support",eol:"Out of Support",less:"Show Less",more:"Show {n} more versions",notes:"View Release Notes for {v}",dark:"Toggle Dark Mode",ossDesc:"Free security updates and bugfixes.",entDesc:"Expert support during OSS plus extended support after EOL.",eolDesc:"End of life. No further updates are provided.",today:"Today's date: {date}",branch:"Branch",initial:"Initial Release",ossEnd:"End OSS",entEnd:"End Enterprise *"},fr:{filter:"Filtrer les versions...",oss:"Support OSS",ent:"Support Entreprise",eol:"Fin de support",less:"Voir moins",more:"Voir {n} versions supplémentaires",notes:"Voir les notes de version pour {v}",dark:"Changer le mode sombre",ossDesc:"Mises à jour de sécurité et corrections de bugs gratuites.",entDesc:"Support pendant la période OSS plus support étendu après.",eolDesc:"Version en fin de vie. Plus de mises à jour.",today:"Date du jour : {date}",branch:"Version",initial:"Sortie initiale",ossEnd:"Fin OSS",entEnd:"Fin Entreprise *"}};class f{constructor(e,i,s={}){this.root=document.getElementById(e),this.root&&(this.options=s,this.visibleCount=s.visibleCount||3,this.showTable=s.showTable!==!1,this.isExpanded=!1,this.theme="light",this.filterText="",this.activeHighlight=null,this.translations={...b,...s.i18n||{}},this.locale=s.locale||this.detectLanguage(),this.setupBaseLayout(),this.updateData(i))}detectLanguage(){const e=(navigator.language||"en").split("-")[0];return this.translations[e]?e:"en"}t(e,i={}){let s=(this.translations[this.locale]||this.translations.en)[e]||e;return Object.keys(i).forEach(t=>s=s.replace(`{${t}}`,i[t])),s}setupBaseLayout(){this.root.innerHTML="",this.root.setAttribute("role","application"),this.root.setAttribute("aria-label","Product Lifecycle Timeline"),this.renderToolbar(),this.renderThemeToggle(),this.showTable&&(this.tableContainer=this.el("div","timeline-table-container",this.root)),this.wrapper=this.el("div","timeline-wrapper",this.root),this.wrapper.setAttribute("role","grid"),this.wrapper.setAttribute("aria-readonly","true"),this.axis=this.el("div","timeline-axis",this.wrapper),this.axis.setAttribute("role","row"),this.tracks=this.el("div","timeline-tracks",this.wrapper),this.legendContainer=this.el("div","timeline-legend-container",this.wrapper)}updateData(e){this.data=this.validateData(e||[]),this.calculateTimeRange(),this.render()}validateData(e){return e.filter((i,s)=>{const n=["version","ossStart","ossEnd"].filter(l=>!i[l]);if(n.length>0)return console.warn(`[Timeline] Missing fields for item at index ${s}: ${n.join(", ")}`),!1;const a=["ossStart","ossEnd","enterpriseEnd"].filter(l=>i[l]).filter(l=>isNaN(new Date(i[l]).getTime()));return a.length>0?(console.warn(`[Timeline] Invalid date format for item "${i.version}": ${a.join(", ")}`),!1):!0})}calculateTimeRange(){if(this.currentDate=new Date,!this.data.length){this.minYear=this.currentDate.getFullYear()-1,this.maxYear=this.currentDate.getFullYear()+3;return}const e=this.data.flatMap(i=>[new Date(i.ossStart),new Date(i.enterpriseEnd||i.ossEnd)]);this.minYear=new Date(Math.min(...e)).getFullYear(),this.maxYear=new Date(Math.max(...e)).getFullYear()}renderTable(){const e=this.el("table","timeline-table",this.tableContainer);e.setAttribute("aria-label","Project support");const i=this.el("thead","",e),s=this.el("tr","",i);[this.t("branch"),this.t("initial"),this.t("ossEnd"),this.t("entEnd")].forEach(t=>{this.el("th","",s).textContent=t}),this.tableBody=this.el("tbody","",e),this.tableRows=this.data.map(t=>this.createTableRow(t)),this.tableToggleContainer=this.el("div","timeline-table-toggle",this.tableContainer),this.updateTableVisibility()}createTableRow(e){const i=this.el("tr","",this.tableBody),s=Date.now(),t=new Date(e.ossStart).getTime(),n=new Date(e.ossEnd).getTime(),r=e.enterpriseEnd?new Date(e.enterpriseEnd).getTime():n,a=s>=t&&s<=n?"status-oss":s>n&&s<=r?"status-ent":s>r?"status-expired":"",l=this.el("td","",i);let d=`<span class="table-badge ${a}">${e.versionOriginal||e.version}</span>`;e.releaseNotesUrl?l.innerHTML=`<a href="${e.releaseNotesUrl}" target="_blank" class="table-version-link">${d}</a>`:l.innerHTML=d;const o=this.el("td","",i);o.textContent=e.ossStart,s>t&&(o.className="past-date");const h=this.el("td","",i);h.textContent=e.ossEnd,s>n&&(h.className="past-date");const c=this.el("td","",i);return c.textContent=e.enterpriseEnd||e.ossEnd,s>r&&(c.className="past-date"),{el:i,version:e.version.toLowerCase(),versionOriginal:e.versionOriginal||e.version}}updateTableVisibility(){const e=this.tableRows.filter(t=>t.version.includes(this.filterText));this.tableRows.forEach(t=>{const n=t.el.querySelector(".table-badge");n.innerHTML=this.highlight(t.versionOriginal||t.version),t.el.classList.remove("row-visible"),t.el.classList.add("row-hidden")});const i=this.filterText===""&&e.length>this.visibleCount;if((i&&!this.isExpanded?e.slice(0,this.visibleCount):e).forEach(t=>{t.el.classList.remove("row-hidden"),t.el.classList.add("row-visible")}),this.tableToggleContainer.innerHTML="",i){const t=this.el("button","timeline-toggle-btn table-toggle",this.tableToggleContainer),n=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;t.innerHTML=this.isExpanded?`${this.t("less")} ${n}`:`${this.t("more",{n:e.length-this.visibleCount})} ${n}`,t.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}render(){this.showTable&&(this.tableContainer.innerHTML=""),this.axis.innerHTML="",this.tracks.innerHTML="",this.legendContainer.innerHTML="",this.showTable&&this.renderTable(),this.renderAxis(),this.grid=this.el("div","grid-lines-container",this.tracks),this.indicators=this.el("div","indicators-container",this.tracks),this.renderGrid(),this.renderCurrentDateLine(),this.rows=this.data.map((e,i)=>this.createRow(e,i)),this.toggleContainer=this.el("div","timeline-more-toggle",this.tracks,{paddingTop:"10px",display:"flex",justifyContent:"center",position:"relative",zIndex:"10"}),this.updateVisibility(),this.renderLegend(),this.setupTooltip()}setupTooltip(){this.tooltip&&this.tooltip.remove(),this.tooltip=this.el("div","timeline-tooltip-overlay",document.body),this.tooltip.style.display="none",this.tooltip.setAttribute("role","tooltip")}showTooltip(e,i){this.tooltip.innerHTML=i,this.tooltip.style.display="block",this.updateTooltipPos(e)}updateTooltipPos(e){let s=e.pageX+12,t=e.pageY+12;const n=this.tooltip.offsetWidth,r=this.tooltip.offsetHeight;s+n>window.innerWidth&&(s=e.pageX-n-12),t+r>window.innerHeight&&(t=e.pageY-r-12),this.tooltip.style.left=`${s}px`,this.tooltip.style.top=`${t}px`}hideTooltip(){this.tooltip&&(this.tooltip.style.display="none")}highlight(e){if(!this.filterText)return e;try{const i=new RegExp(`(${this.filterText})`,"gi");return e.replace(i,'<mark class="highlight-match">$1</mark>')}catch{return e}}el(e,i,s,t={}){const n=document.createElement(e);return i&&(n.className=i),Object.assign(n.style,t),s&&s.appendChild(n),n}renderToolbar(){const e=this.el("div","timeline-toolbar",this.root),i=this.el("div","timeline-filter-container",e);i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>';const s=this.el("input","timeline-filter-input",i);s.placeholder=this.t("filter"),s.value=this.filterText,s.setAttribute("aria-label",this.t("filter")),s.oninput=t=>{this.filterText=t.target.value.toLowerCase().trim(),this.updateVisibility()}}renderThemeToggle(){const e=this.el("button","theme-toggle-btn",this.root);e.title=this.t("dark"),e.setAttribute("aria-label",this.t("dark"));const i={moon:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',sun:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'};e.innerHTML=this.theme==="dark"?i.sun:i.moon,e.onclick=()=>{this.theme=this.theme==="light"?"dark":"light",document.documentElement.setAttribute("data-theme",this.theme),e.innerHTML=this.theme==="dark"?i.sun:i.moon,e.setAttribute("aria-pressed",this.theme==="dark")}}renderLegend(){this.legendContainer.innerHTML="";const e=this.el("div","release-legend",this.legendContainer);e.setAttribute("role","complementary"),e.setAttribute("aria-label","Support Legend"),["oss","ent","eol"].forEach(i=>{const s=this.el("div",`legend-block ${i==="ent"?"commercial":i}`,e);s.classList.add("legend-item-reactive"),this.activeHighlight===i&&s.classList.add("active-highlight"),s.innerHTML=`
        <div class="legend-icon" aria-hidden="true"></div>
        <div><h3>${this.t(i)}</h3><p>${this.t(i+"Desc")}</p></div>
      `,s.onclick=()=>this.highlightSegment(i)})}highlightSegment(e){this.activeHighlight=this.activeHighlight===e?null:e,this.root.classList.remove("highlight-oss","highlight-ent","highlight-eol"),this.activeHighlight&&this.root.classList.add(`highlight-${this.activeHighlight}`),this.renderLegend()}renderAxis(){this.el("div","",this.axis,{width:"96px",flexShrink:"0"}).setAttribute("role","presentation");for(let i=this.minYear;i<=this.maxYear;i++){const s=this.el("div","timeline-year",this.axis);s.textContent=i,s.setAttribute("role","columnheader")}}renderGrid(){const e=new Date(this.minYear,0,1).getTime(),i=new Date(this.maxYear,11,31).getTime()-e;for(let s=this.minYear;s<=this.maxYear;s++){const t=this.el("div","year-grid-line",this.grid);t.style.left=`${(new Date(s,0,1).getTime()-e)/i*100}%`,t.setAttribute("role","presentation")}}createRow(e,i){const s=this.el("div","timeline-row row-entrance",this.tracks);s.setAttribute("role","row"),s.style.transitionDelay=`${i*.05}s`;const t=this.el("div","version-label",s);t.setAttribute("role","rowheader");const n=Date.now(),r=new Date(e.ossStart).getTime(),a=new Date(e.ossEnd).getTime(),l=e.enterpriseEnd?new Date(e.enterpriseEnd).getTime():a,d=n>=r&&n<=a?"status-oss":n>a&&n<=l?"status-ent":n>l?"status-expired":"";if(d&&t.classList.add(d),e.releaseNotesUrl){const h=this.el("a","version-link",t);h.href=e.releaseNotesUrl,h.target="_blank",h.innerHTML=this.highlight(e.version),h.title=this.t("notes",{v:e.version}),h.setAttribute("aria-label",this.t("notes",{v:e.version}))}else t.innerHTML=this.highlight(e.version);const o=this.el("div","track-container",s);return o.setAttribute("role","gridcell"),o.appendChild(this.createBar(e,e.ossStart,e.enterpriseEnd||e.ossEnd,"bar-ent",this.t("ent"))),o.appendChild(this.createBar(e,e.ossStart,e.ossEnd,"bar-oss",this.t("oss"))),{el:s,version:e.version.toLowerCase(),versionOriginal:e.version}}createBar(e,i,s,t,n){const r=new Date(i).getTime(),a=new Date(s).getTime(),l=new Date(this.minYear,0,1).getTime(),d=new Date(this.maxYear,11,31).getTime()-l,o=this.el("div",`bar-segment ${t}`),h=t==="bar-oss"?"segment-oss":"segment-ent";o.classList.add(h),o.style.left=`${(r-l)/d*100}%`,o.style.width=`${(a-r)/d*100}%`,o.setAttribute("role","img"),o.setAttribute("aria-label",`${n}: ${e.version} (${i} to ${s})`),o.tabIndex=0;const c=`
      <div class="tooltip-header">${n} - ${e.version}</div>
      <div class="tooltip-date"><strong>Du:</strong> ${i}</div>
      <div class="tooltip-date"><strong>Au:</strong> ${s}</div>
    `;return o.onmouseenter=u=>this.showTooltip(u,c),o.onmousemove=u=>this.updateTooltipPos(u),o.onmouseleave=()=>this.hideTooltip(),o.onfocus=u=>{const p=o.getBoundingClientRect();this.showTooltip({pageX:p.left+window.scrollX,pageY:p.top+window.scrollY-40},c)},o.onblur=()=>this.hideTooltip(),o}updateVisibility(){const e=this.rows.filter(t=>t.version.includes(this.filterText));this.rows.forEach(t=>{const n=t.el.querySelector(".version-label"),r=n.querySelector(".version-link");r?r.innerHTML=this.highlight(t.versionOriginal||t.version):n.innerHTML=this.highlight(t.versionOriginal||t.version),t.el.classList.remove("row-visible"),t.el.classList.add("row-hidden")});const i=this.filterText===""&&e.length>this.visibleCount;if((i&&!this.isExpanded?e.slice(0,this.visibleCount):e).forEach(t=>{t.el.classList.remove("row-hidden"),t.el.classList.add("row-visible")}),this.showTable&&this.updateTableVisibility(),this.toggleContainer.innerHTML="",i){const t=this.el("button","timeline-toggle-btn",this.toggleContainer),n=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="${this.isExpanded?"18 15 12 9 6 15":"6 9 12 15 18 9"}"></polyline></svg>`;t.innerHTML=this.isExpanded?`${this.t("less")} ${n}`:`${this.t("more",{n:e.length-this.visibleCount})} ${n}`,t.setAttribute("aria-expanded",this.isExpanded),t.onclick=()=>{this.isExpanded=!this.isExpanded,this.updateVisibility()}}}renderCurrentDateLine(){const e=new Date(this.minYear,0,1).getTime(),i=new Date(this.maxYear,11,31).getTime()-e,s=Date.now()-e;if(s<0||s>i)return;const t=new Date().toISOString().split("T")[0],n=this.el("div","current-date-indicator",this.indicators);n.style.left=`${s/i*100}%`,n.setAttribute("role","separator"),n.setAttribute("aria-label",this.t("today",{date:t}));const r=this.el("div","current-date-badge",n);r.textContent=t,r.setAttribute("aria-hidden","true")}}const v=[{version:"6.0.x (Current)",ossStart:"2025-01-01",ossEnd:"2026-08-20",enterpriseEnd:"2027-02-15",releaseNotesUrl:"https://example.com/notes"},{version:"5.2.x",ossStart:"2024-06-10",ossEnd:"2025-11-30",enterpriseEnd:"2027-12-01",releaseNotesUrl:"https://example.com/notes"},{version:"4.4.x",ossStart:"2023-06-10",ossEnd:"2023-11-30",enterpriseEnd:"2024-12-01"},{version:"3.4.x (Extended)",ossStart:"2020-06-10",ossEnd:"2021-11-30",enterpriseEnd:"2023-12-31"},{version:"2.1.x (EOL)",ossStart:"2018-01-01",ossEnd:"2019-12-31",enterpriseEnd:"2020-06-30"}],w=new f("timeline-root",v,{visibleCount:3,locale:"fr"});document.getElementById("update-btn").onclick=()=>{const g=[{version:"7.0.x (Future)",ossStart:"2026-01-01",ossEnd:"2027-06-30",enterpriseEnd:"2028-12-31"},...v];w.updateData(g),alert("Données mises à jour dynamiquement !")};
